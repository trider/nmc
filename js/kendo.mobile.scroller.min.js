/*
* Kendo UI Beta v2012.1.229 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

(function(a,b){var c=kendo.mobile,d=c.ui,e=a.proxy,f=a.extend,g=d.Widget,h=kendo.Class,i=c.Move,j=c.Transition,k=c.Animation,l=500,m=.7,n=.93,o=.5,p="change",q=k.extend({init:function(a){var b=this;k.fn.init.call(b),f(b,a,{transition:new j({axis:a.axis,move:a.move,onEnd:function(){b._end()}})}),b.tap.bind("press",function(){b.cancel()}),b.swipe.bind("end",e(b.start,b)),b.swipe.bind("tap",e(b.onEnd,b))},onCancel:function(){this.transition.cancel()},freeze:function(a){var b=this;b.cancel(),b._moveTo(a)},onEnd:function(){var a=this;a._outOfBounds()?a._snapBack():a._end()},done:function(){return Math.abs(this.velocity)<1},start:function(){var a=this;!a.boundary.present()||(a._outOfBounds()?a._snapBack():(a.velocity=a.swipe[a.axis].velocity*16,a.velocity&&(a.tap.captureNext(),k.fn.start.call(a))))},tick:function(){var a=this,b=a._outOfBounds()?o:n;a.move.translateAxis(a.axis,a.velocity*=b)},_end:function(){this.tap.cancelCapture(),this.end()},_outOfBounds:function(){return this.boundary.outOfBounds(this.move[this.axis])},_snapBack:function(){var a=this,b=a.boundary,c=a.move[a.axis]>b.max?b.max:b.min;a._moveTo(c)},_moveTo:function(a){this.transition.moveTo({location:a,duration:l,ease:j.easeOutExpo})}}),r=h.extend({init:function(b){var c=this,d=b.axis==="x",g=a('<div class="km-touch-scrollbar km-'+(d?"horizontal":"vertical")+'-scrollbar" />');f(c,b,{element:g,elementSize:0,move:new i(g),scrollMove:b.move,size:d?"width":"height"}),c.scrollMove.bind(p,e(c._move,c)),c.container.append(g)},_move:function(){var a=this,b=a.axis,c=a.boundary,d=c.size,e=a.scrollMove,f=d/c.total,g=Math.round(-e[b]*f),h=Math.round(d*f);g+h>d?h=d-g:g<0&&(h+=g,g=0),a.elementSize!=h&&(a.element.css(a.size,h+"px"),a.elementSize=h),a.move.moveAxis(b,g)},show:function(){this.element.css({opacity:m,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),s=g.extend({init:function(a,b){var d=this;g.fn.init.call(d,a,b),a=d.element,a.css("overflow","hidden").wrapInner('<div class="km-scroll-container"/>');var e=a.children().first(),h=new c.Tap(a),j=new i(e),k=new c.ContainerBoundary({element:e,container:a}),l=new c.Swipe(a,{start:function(){k.refresh()}}),m=new c.Draggable({move:j,boundary:k,swipe:l,elastic:!0});f(d,{boundary:k,move:j,boundary:k,swipe:l,draggable:m,tap:h,pulled:!1,scrollElement:e}),d._initAxis("x"),d._initAxis("y"),k.refresh()},reset:function(){this.move.moveTo({x:0,y:0})},pullHandled:function(){this.yinertia.onEnd(),this.xinertia.onEnd()},handlePull:function(a){var b=this;b.draggable.y.bind("change",function(){b.move.y/o>a.offset?b.pulled||(b.pulled=!0,a.startPull()):b.pulled&&(b.pulled=!1,a.cancelPull())}),b.swipe.bind("end",function(){b.pulled&&(b.pulled=!1,a.pull(),b.yinertia.freeze(a.offset/2))})},_initAxis:function(a){var b=this,c=b.move,d=b.boundary[a],e=b.draggable[a],f=b.tap,g=new r({axis:a,move:c,boundary:d,container:b.element}),h=new q({axis:a,move:c,tap:f,swipe:b.swipe,boundary:d,end:function(){g.hide()}});b[a+"inertia"]=h,e.bind(p,function(){g.show()})},options:{name:"Scroller"}});d.plugin(s)})(jQuery)