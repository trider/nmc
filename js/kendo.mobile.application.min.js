/*
* Kendo UI Beta v2012.1.229 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

(function(a,b){function L(){return Math.abs(window.orientation)/90?"km-horizontal":"km-vertical"}function K(b){I(a(b.currentTarget))&&b.preventDefault()}function J(b){if(!(b.which>1)){var c=a(b.currentTarget),e=c.attr(y);!b.isDefaultPrevented()&&I(c)&&(e&&e!=z&&(c.attr(y,z),setTimeout(function(){c.attr(y,e)}),d.navigate(e)),b.preventDefault())}}function I(a){return a.data(c.ns+"rel")!="external"}function H(a){A.test(a)&&(a=RegExp.$1),q[0].innerHTML=a;return q}function G(a){return a.replace(/(\S+)/g,"["+h("role")+"=$1],")}var c=window.kendo,d=c.history,e=c.support,f=c.mobile,g=c.roleSelector,h=c.attr,i=f.View,j=f.ViewSwitcher,k=f.Layout,l=e.mobileOS,m=l?l.name:"ios",n="km-"+m,o=n+(l?" "+n+l.majorVersion:"")+(l.appMode?" km-app":""),p=e.transitions.css+"transform",q=a("<div/>"),r='<meta name="apple-mobile-web-app-capable" content="yes" /> \n                <meta name="apple-mobile-web-app-status-bar-style" content="black" /> \n                <meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" name="viewport" />',s=c.template('<link rel="apple-touch-icon'+(e.mobileOS.android?"-precomposed":"")+'" # if(data.size) { # sizes="#=data.size#" #}# href="#=data.icon#" />',{usedWithBlock:!1}),t=G("button backbutton detailbutton listview-link"),u=G("tab"),v="onorientationchange"in window?"orientationchange":"resize",w=l.device=="iphone"||l.device=="ipod",x=60,y="href",z="#!",A=/<body[^>]*>(([\u000a\u000d\u2028\u2029]|.)*)<\/body>/i,B=window.scrollTo,C=a(window),D=a("head"),E=["touchstart","touchend","touchmove","mousedown","mousemove","mouseup"],F=a.proxy,M=c.Observable.extend({init:function(b,d){var e=this;e.layouts={},e.options=a.extend({hideAddressBar:!0},d),c.Observable.fn.init.call(e,e.options),e.element=b?a(b):a(document.body),a(function(){e._attachHideBarHandlers(),e._setupElementClass(),e._attachMeta(),e._loader(),e._setupAppLinks(),e._setupLayouts(e.element),e._startHistory(),e._attachCapture()})},navigate:function(a){var b=this;b._findView(a,function(c){b.view!==c&&(d.navigate(a,!0),(new j(b)).replace(b.view,c),b.view=c)})},scroller:function(){return this.view.content.data("kendoScroller")},_setupAppLinks:function(){this.element.delegate(u,e.mousedown,J).delegate(t,e.mouseup,J).delegate(u+t,"click",K)},_setupLayouts:function(d){var e=this,f=c.ns+"platform";d.find(g("layout")).each(function(){var d=a(this),g=d.data(f);if(g===b||g===m)e.layouts[d.data("id")]=c.initWidget(d,{},c.mobile.ui)})},_startHistory:function(){var b=this,c,e;c=b.element.find(g("view")),b.rootView=c.first(),e={change:function(a){b.navigate(a.string)},ready:function(a){b._findView(a.string,function(a){c.not(a).hide(),a.onShowStart(),b.view=a})}},d.start(a.extend(b.options,e))},_createView:function(a){var b=this,d=b.dataOrDefault(a,"layout");d&&(d=b.layouts[d]);var e=c.initWidget(a,{layout:d},c.mobile.ui);return e},_createRemoteView:function(b,c){var d=this,e=a(H(c)),f=e.find(g("view")).hide(),i=e.find(g("layout")),j=e.find("script, style"),k=f.first(),l;k.hide().attr(h("url"),b),d._setupLayouts(e),d.element.append(i),d.element.append(j),d.element.append(f),l=d._createView(k);return l},_findView:function(b,c){var d=this,e,f=b.charAt(0),g=f==="#",i=f==="/",j;b?(j=d.element.find("["+h("url")+"='"+b+"']"),!j[0]&&!i&&(j=d.element.find(g?b:"#"+b))):j=d.rootView,e=j.data("kendoView"),e?c(e):j[0]?c(d._createView(j)):(d._xhr&&d._xhr.abort(),d.showLoading(),d._xhr=a.get(b,function(a){c(d._createRemoteView(b,a)),d.hideLoading()}).fail(function(){d.hideLoading()}))},_setupElementClass:function(){var a=this,b=a.options.platform?"km-"+a.options.platform:o;element=a.element,element.parent().addClass("km-root"),element.addClass(b+" "+L()),C.bind(v,function(b){element.removeClass("km-horizontal km-vertical").addClass(L()),a.view&&a.view.scroller.reset()})},_attachMeta:function(){var a=this.options.icon,b;D.prepend(r);if(a){typeof a=="string"&&(a={"":a});for(b in a)D.prepend(s({icon:a[b],size:b}))}},_attachHideBarHandlers:function(){var a=this;!l.appMode&&!!a.options.hideAddressBar&&(a._initialHeight={},a._lastOrientation=-1,w&&C.bind("load "+v,F(a._hideBar,a)))},_hideBar:function(){var a=this,b=a.element,c=window.orientation+"",d=a._initialHeight,e=a._lastOrientation,f;e!==c&&(a._lastOrientation=c,d[c]||(d[c]=C.height()),f=d[c]+x,f!=b.height()&&(b.height(f),setTimeout(B,0,0,1)))},_attachCapture:function(){function b(b){a.transitioning&&b.stopPropagation()}var a=this;a.transitioning=!1;for(var c=0;c<E.length;c++)a.element[0].addEventListener(E[c],b,!0)},dataOrDefault:function(a,b){return typeof a.data(c.ns+b)!="undefined"?a.data(b):this.options[b]},hideLoading:function(){var a=this;clearTimeout(a._loading),a.loader.hide()},showLoading:function(){var a=this;a.options.loading!==!1&&(a._loading=setTimeout(function(){a.loader.show()},100))},_loader:function(){var c=this,d=c.options.loading;d===b&&(d="<h1>Loading..."),c.loader=a('<div class="km-loader"><span class="km-loading km-spin"></span>'+d+"</div>").hide().appendTo(c.element)}});c.mobile.Application=M})(jQuery)