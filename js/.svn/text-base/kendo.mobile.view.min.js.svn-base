/*
* Kendo UI Beta v2012.1.229 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

(function(a,b){var c=window.kendo,d=c.mobile,e=d.ui,f=c.history,g=c.support.mobileOS,h=c.attr,i=c.Class,j=e.Widget,k="init",l="show",m="pull",n="startPull",o="cancelPull",p=c.roleSelector,q=j.extend({init:function(a,b){var d=this,e=p("content");j.fn.init.call(d,a,b),d.layout=b.layout,d.element.data("kendoView",d).addClass("km-view"),d.header=a.find(p("header")).addClass("km-header"),d.footer=a.find(p("footer")).addClass("km-footer"),a.has(e)[0]||a.wrapInner("<div "+h("role")+'="content"></div>'),d.content=a.find(p("content")).addClass("km-content"),d.title=a.data(c.ns+"title"),d.id=a.data(c.ns+"url")||"#"+a.attr("id"),d.element.prepend(d.header).append(d.footer),d.layout&&d.layout.setup(d),c.mobile.init(a.children()),d.content.kendoMobileScroller({useOnDesktop:!0}),d.scroller=d.content.data("kendoMobileScroller"),d.scrollerContent=d.scroller.scrollElement,d.trigger(k,{view:d}),d._eachWidget(function(a){a.viewInit(d)})},events:[k,l],options:{name:"View"},onHideStart:function(){var a=this;a.layout&&a.layout.detach(a)},onShowStart:function(){var a=this;a.element.css("display",""),a.params=f.url().params,a.layout&&a.layout.attach(a),a.trigger(l,{view:a}),a._eachWidget(function(b){b.viewShow(a)})},_eachWidget:function(b){var d=c.ns+"role";this.element.find("[data-"+d+"]").each(function(){var c=a(this),f=e.roles[c.data(d)];if(f){var g=c.data("kendo"+f.fn.options.prefix+f.fn.options.name);g||raise(c[0]),b(g)}})}}),r=i.extend({init:function(a){this.application=a},replace:function(a,b){var c=this,d=function(){c.application.transitioning=!1,a.element.hide()},e;c.application.transitioning=!0,c.back=b.nextView===a&&JSON.stringify(b.params)===JSON.stringify(f.url().params),e=c.application.dataOrDefault((c.back?a:b).element,"transition"),c.parallax=e==="slide",a.onHideStart(),b.onShowStart(),c.back&&!c.parallax?(b.element.css("z-index",0),a.element.css("z-index",1)):(b.element.css("z-index",1),a.element.css("z-index",0)),c.switchWith(a.footer,b.footer),c.switchWith(a.header,b.header),c.contents(a,b).kendoAnimateTo(c.contents(b,a),{effects:e,reverse:c.back,complete:d}),c.back||(a.nextView=b)},contents:function(a,b){var c;this.parallax?(c=a.content,b.header[0]||(c=c.add(a.header)),b.footer[0]||(c=c.add(a.footer))):c=a.element;return c},switchWith:function(a,b){a[0]&&b[0]&&a[0]!=b[0]&&this.parallax&&a.kendoAnimateTo(b,{effects:"fade"})}}),s=j.extend({init:function(a,b){var d=this;j.fn.init.call(d,a,b),d.element=a.detach(),d.header=a.find(p("header")).addClass("km-header"),d.footer=a.find(p("footer")).addClass("km-footer"),d.elements=d.header.add(d.footer),c.mobile.init(d.element.children()),d.trigger(k,{layout:d})},options:{name:"Layout"},events:[k,l],setup:function(a){a.header[0]||(a.header=this.header),a.footer[0]||(a.footer=this.footer)},detach:function(a){var b=this;a.header===b.header&&a.element.prepend(b.header.detach().clone(!0)),a.footer===b.footer&&a.element.append(b.footer.detach().clone(!0))},attach:function(a){var b=this;a.header===b.header&&(b.header.detach(),a.element.find(p("header")).remove(),a.element.prepend(b.header)),a.footer===b.footer&&(b.footer.detach(),a.element.find(p("footer")).remove(),a.element.append(b.footer)),b.trigger(l,{layout:b,view:a})}});e.plugin(q),e.plugin(s),d.ViewSwitcher=r})(jQuery)